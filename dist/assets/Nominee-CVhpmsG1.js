import{d as x,r as c,u as F,A as T,j as e,B as m}from"./index-BPKYvsHV.js";import{S as b}from"./react-select.esm-Br9WMT08.js";import{F as f}from"./index-7r-fndQ6.js";import{c as N}from"./countries-DmcBImKE.js";const g=[{value:"Passport",label:"Passport"},{value:"Driver License",label:"Driver License"},{value:"National ID Card",label:"National ID Card"}],A=[{value:"Single",label:"Single"},{value:"Married",label:"Married"},{value:"Divorced",label:"Divorced"},{value:"Widowed",label:"Widowed"}],M=[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}],y={control:l=>({...l,backgroundColor:"rgb(30 30 32 / var(--tw-bg-opacity))",borderColor:"#1E1E20",minHeight:"50px",height:"50px",outline:"none"}),valueContainer:l=>({...l,height:"40px",display:"flex",alignItems:"center"}),input:l=>({...l,margin:"0px"}),indicatorsContainer:l=>({...l,height:"50px",borderColor:"#1E1E20"}),indicatorSeparator:()=>({display:"none"}),menu:l=>({...l,backgroundColor:"#1E1E20",borderRadius:"5px",marginTop:"0px",padding:"5px"}),option:(l,n)=>({...l,backgroundColor:n.isSelected?"blue":n.isFocused?"lightblue":"white",color:n.isSelected?"white":"black",padding:"10px",display:"flex",alignItems:"center",gap:"5px"}),singleValue:l=>({...l,color:"white"}),placeholder:l=>({...l,color:"white"})},E=async(l,n)=>{try{const r=new FormData;return r.append("personalId",n),console.log(r),(await x.post("/nominee/image",r,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error uploading profile images:",r),r}},S=async(l,n)=>{try{return(await x.post("/nominee",n,{headers:{Authorization:`Bearer ${l}`}})).data}catch(r){throw r==null?void 0:r.response.data}},D=async l=>{try{return(await x.get("/nominee",{headers:{Authorization:`Bearer ${l}`}})).data}catch(n){throw console.error("Error fetching nominee data:",n),n}},L=()=>{const[l,n]=c.useState("info"),[r,i]=c.useState(!1),w=F(),[t,u]=c.useState({firstName:null,middleName:null,lastName:null,dateOfBirth:null,address:null,city:null,zipCode:null,country:null,relation:null,contactInfo:null,idType:null,idNumber:null,idFile:null}),{auth:d}=c.useContext(T);c.useEffect(()=>{(async()=>{try{const a=await D(d.accessToken);console.log(d.accessToken),u({firstName:a.firstName||null,middleName:a.middleName||null,lastName:a.lastName||null,dateOfBirth:a.dateOfBirth||null,address:a.address||null,city:a.city||null,zipCode:a.postalCode||null,country:a.country||null,relation:a.relationshipToTestator||null,contactInfo:a.contactInfo||null,idType:a.idType||null,idNumber:a.idNumber?a.idNumber.toString():null,idFile:null})}catch(a){console.error("Error fetching nominee info:",a)}})()},[d.accessToken]);const o=s=>{const{name:a,value:p,type:C,files:k}=s.target;u(I=>({...I,[a]:C==="file"?k[0]:p||null}))},h=s=>a=>{u(p=>({...p,[s]:a?a.value:null}))},j=async s=>{s.preventDefault(),i(!0);try{const a={firstName:t.firstName||"",middleName:t.middleName||"",lastName:t.lastName||"",dateOfBirth:t.dateOfBirth||"",address:t.address||"",city:t.city||"",postalCode:t.zipCode||"",country:t.country||"",relationshipToTestator:t.relation||"",contactInfo:t.contactInfo||"",idType:t.idType||"",idNumber:t.idNumber};await S(d.accessToken,a),m.success("Nominee information submitted!"),n("image")}catch(a){console.error("Error updating nominee information:",a),m.error(a.response.data.detail||"Failed to update nominee information")}finally{i(!1)}},v=async s=>{s.preventDefault(),i(!0);try{t.idFile?(await E(d.accessToken,t.idFile),setTimeout(()=>{m.success("Nominee ID image uploaded successfully!"),i(!1)},2e3),w("/profile")):(m.error("Please select an image file to upload."),i(!1))}catch(a){console.error("Error uploading nominee ID image:",a.response.data.detail),m.error(a.response.data.detail),i(!1)}};return e.jsxs("div",{className:"w-full max-w-[1200px] bg-accent rounded-md p-4 md:p-8 text-white",children:[e.jsx("h1",{className:"text-2xl md:text-3xl mt-6 md:mt-12 text-center mb-6",children:"Nominee KYC"}),e.jsxs("div",{className:"flex mb-4",children:[e.jsx("button",{className:`flex-1 py-2 ${l==="info"?"bg-primary":"bg-gray-600"}`,onClick:()=>n("info"),children:"Nominee Information"}),e.jsx("button",{className:`flex-1 py-2 ${l==="image"?"bg-primary":"bg-gray-600"}`,onClick:()=>n("image"),children:"Upload ID Image"})]}),l==="info"&&e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("label",{className:"block text-sm mb-2",htmlFor:"firstName",children:"First Name"}),e.jsx("input",{name:"firstName",value:t.firstName||"",onChange:o,className:"w-full bg-background p-3 rounded border-0 outline-none text-primary",type:"text",placeholder:"Enter Nominee's First Name",required:!0})]}),e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("label",{className:"block text-sm mb-2",htmlFor:"middleName",children:"Middle Name"}),e.jsx("input",{name:"middleName",value:t.middleName||"",onChange:o,className:"w-full bg-background p-3 rounded border-0 outline-none text-primary",type:"text",placeholder:"Enter Nominee's Middle Name",required:!0})]}),e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("label",{className:"block text-sm mb-2",htmlFor:"lastName",children:"Last Name"}),e.jsx("input",{name:"lastName",value:t.lastName||"",onChange:o,className:"w-full bg-background p-3 rounded border-0 outline-none text-primary",type:"text",placeholder:"Enter Nominee's Last Name",required:!0})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("label",{className:"block text-sm mb-2",htmlFor:"dateOfBirth",children:"Date of Birth"}),e.jsx("input",{name:"dateOfBirth",value:t.dateOfBirth||"",onChange:o,className:"w-full bg-background p-3 rounded border-0 outline-none text-primary",type:"date",required:!0})]}),e.jsxs("div",{className:"w-full md:w-2/3",children:[e.jsx("label",{className:"block text-sm mb-2",htmlFor:"address",children:"Address"}),e.jsx("textarea",{name:"address",value:t.address||"",onChange:o,className:"w-full bg-background p-3 rounded border-0 outline-none text-primary",rows:2,placeholder:"Enter Nominee's Address",required:!0})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("label",{className:"block text-sm mb-2",htmlFor:"city",children:"City"}),e.jsx("input",{name:"city",value:t.city||"",onChange:o,className:"w-full bg-background p-3 rounded border-0 outline-none text-primary",type:"text",placeholder:"Enter Nominee's City",required:!0})]}),e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("label",{className:"block text-sm mb-2",htmlFor:"zipCode",children:"Postal Code"}),e.jsx("input",{name:"zipCode",value:t.zipCode||"",onChange:o,className:"w-full bg-background p-3 rounded border-0 outline-none text-primary",type:"text",placeholder:"Enter Nominee's Postal Code",required:!0})]}),e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("label",{className:"block text-sm mb-2",htmlFor:"country",children:"Country"}),e.jsx(b,{name:"country",value:N.find(s=>s.value===t.country)||null,onChange:h("country"),options:N,styles:y,placeholder:"Select Country",required:!0})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("label",{className:"block text-sm mb-2",htmlFor:"relation",children:"Relation to Testator"}),e.jsx("input",{name:"relation",value:t.relation||"",onChange:o,className:"w-full bg-background p-3 rounded border-0 outline-none text-primary",type:"text",placeholder:"Enter Relation to Testator",required:!0})]}),e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("label",{className:"block text-sm mb-2",htmlFor:"contactInfo",children:"Contact Information"}),e.jsx("input",{name:"contactInfo",value:t.contactInfo||"",onChange:o,className:"w-full bg-background p-3 rounded border-0 outline-none text-primary",type:"text",placeholder:"Enter Contact Information",required:!0})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("label",{className:"block text-sm mb-2",htmlFor:"idType",children:"ID Type"}),e.jsx(b,{name:"idType",value:g.find(s=>s.value===t.idType)||null,onChange:h("idType"),options:g,styles:y,placeholder:"Select ID Type",required:!0})]}),e.jsxs("div",{className:"w-full md:w-1/2",children:[e.jsx("label",{className:"block text-sm mb-2",htmlFor:"idNumber",children:"ID Number"}),e.jsx("input",{name:"idNumber",value:t.idNumber||"",onChange:o,className:"w-full bg-background p-3 rounded border-0 outline-none text-primary",type:"text",placeholder:"Enter ID Number",required:!0})]})]}),e.jsx("div",{className:"flex justify-center mt-8",children:e.jsx("button",{type:"submit",className:"px-8 py-2 bg-primary text-white rounded",disabled:r,children:r?e.jsx(f,{className:"animate-spin"}):"Save"})})]}),l==="image"&&e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2",htmlFor:"idFile",children:"Upload ID Image"}),e.jsx("input",{name:"idFile",type:"file",accept:"image/*",onChange:o,className:"w-full text-sm"})]}),e.jsx("div",{className:"flex justify-center mt-8",children:e.jsx("button",{type:"submit",className:"px-8 py-2 bg-primary text-white rounded",disabled:r,children:r?e.jsx(f,{className:"animate-spin"}):"Upload"})})]})]})};export{L as N,y as c,M as g,A as m,g as n};
